<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React-DND Examples</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        #root {
            min-height: 100vh;
        }

        /* Loading spinner */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-size: 18px;
            color: #666;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2196f3;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin-right: 12px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root">
        <div class="loading">
            <div class="spinner"></div>
            Loading React-DND Examples...
        </div>
    </div>

    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- Babel standalone for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Main application script -->
    <script type="text/babel">
        // Simple drag and drop implementation for examples
        const { useState, useRef, useEffect } = React;

        // Simple DragDropProvider
        const DragDropProvider = ({ children, onDragEnd }) => {
            const [draggedItem, setDraggedItem] = useState(null);
            const [dragOverId, setDragOverId] = useState(null);

            const handleDragStart = (e, item) => {
                setDraggedItem(item);
                e.dataTransfer.effectAllowed = 'move';
            };

            const handleDragOver = (e, droppableId) => {
                e.preventDefault();
                setDragOverId(droppableId);
            };

            const handleDrop = (e, droppableId) => {
                e.preventDefault();
                if (draggedItem && onDragEnd) {
                    onDragEnd({
                        draggableId: draggedItem.id,
                        source: { index: draggedItem.index, droppableId: draggedItem.droppableId },
                        destination: { index: 0, droppableId }
                    });
                }
                setDraggedItem(null);
                setDragOverId(null);
            };

            const contextValue = {
                draggedItem,
                dragOverId,
                handleDragStart,
                handleDragOver,
                handleDrop
            };

            return React.createElement('div', { className: 'drag-drop-provider' }, children);
        };

        // Simple Draggable
        const Draggable = ({ children, draggableId, index, droppableId }) => {
            const handleDragStart = (e) => {
                e.dataTransfer.setData('text/plain', draggableId);
                e.currentTarget.style.opacity = '0.5';
            };

            const handleDragEnd = (e) => {
                e.currentTarget.style.opacity = '1';
            };

            return React.cloneElement(children, {
                draggable: true,
                onDragStart: handleDragStart,
                onDragEnd: handleDragEnd,
                'data-draggable-id': draggableId,
                'data-index': index,
                'data-droppable-id': droppableId
            });
        };

        // Simple Droppable
        const Droppable = ({ children, droppableId }) => {
            const handleDragOver = (e) => {
                e.preventDefault();
                e.currentTarget.style.backgroundColor = '#f0f8ff';
            };

            const handleDragLeave = (e) => {
                e.currentTarget.style.backgroundColor = '';
            };

            const handleDrop = (e) => {
                e.preventDefault();
                e.currentTarget.style.backgroundColor = '';
                const draggableId = e.dataTransfer.getData('text/plain');
                if (draggableId) {
                    // Trigger custom event for drag end
                    const event = new CustomEvent('dragEnd', {
                        detail: {
                            draggableId,
                            destination: { droppableId, index: 0 }
                        }
                    });
                    document.dispatchEvent(event);
                }
            };

            return React.cloneElement(children, {
                onDragOver: handleDragOver,
                onDragLeave: handleDragLeave,
                onDrop: handleDrop,
                'data-droppable-id': droppableId
            });
        };

        // Basic Sortable List Component
        const BasicSortableList = () => {
            const [items, setItems] = useState([
                { id: '1', content: 'Item 1' },
                { id: '2', content: 'Item 2' },
                { id: '3', content: 'Item 3' },
                { id: '4', content: 'Item 4' },
                { id: '5', content: 'Item 5' },
            ]);

            const handleDragEnd = (result) => {
                if (!result.destination) return;

                const newItems = Array.from(items);
                const [reorderedItem] = newItems.splice(result.source.index, 1);
                newItems.splice(result.destination.index, 0, reorderedItem);

                setItems(newItems);
            };

            return (
                <div style={{ padding: '20px', maxWidth: '400px', margin: '0 auto' }}>
                    <h2>Basic Sortable List</h2>
                    <p>Drag items to reorder them:</p>

                    <DragDropProvider onDragEnd={handleDragEnd}>
                        <Droppable droppableId="sortable-list">
                            <div style={{
                                border: '2px solid #e0e0e0',
                                borderRadius: '8px',
                                padding: '10px',
                                backgroundColor: 'white',
                                transition: 'background-color 0.2s ease',
                                minHeight: '200px'
                            }}>
                                {items.map((item, index) => (
                                    <Draggable key={item.id} draggableId={item.id} index={index} droppableId="sortable-list">
                                        <div style={{
                                            padding: '12px',
                                            margin: '8px 0',
                                            backgroundColor: '#f8f9fa',
                                            border: '1px solid #dee2e6',
                                            borderRadius: '6px',
                                            cursor: 'grab',
                                            userSelect: 'none',
                                            transition: 'all 0.2s ease',
                                        }}>
                                            {item.content}
                                        </div>
                                    </Draggable>
                                ))}
                            </div>
                        </Droppable>
                    </DragDropProvider>

                    <div style={{ marginTop: '20px', fontSize: '14px', color: '#666' }}>
                        <p>Current order:</p>
                        <ol>
                            {items.map(item => (
                                <li key={item.id}>{item.content}</li>
                            ))}
                        </ol>
                    </div>
                </div>
            );
        };

        // Word Bank Component
        const WordBankExample = () => {
            const [wordBank, setWordBank] = useState([
                { id: 'word1', text: 'React', category: 'library' },
                { id: 'word2', text: 'TypeScript', category: 'language' },
                { id: 'word3', text: 'Vue', category: 'library' },
                { id: 'word4', text: 'JavaScript', category: 'language' },
            ]);

            const [selectedWords, setSelectedWords] = useState([]);

            const handleDragEnd = (result) => {
                if (!result.destination) return;

                const draggedWord = wordBank.find(word => word.id === result.draggableId);
                if (!draggedWord) return;

                if (result.destination.droppableId === 'target-area') {
                    if (!selectedWords.find(word => word.id === draggedWord.id)) {
                        setSelectedWords(prev => [...prev, draggedWord]);
                    }
                } else if (result.destination.droppableId === 'word-bank') {
                    setSelectedWords(prev => prev.filter(word => word.id !== draggedWord.id));
                }
            };

            return (
                <div style={{ padding: '20px', maxWidth: '800px', margin: '0 auto' }}>
                    <h2>Word Bank Example</h2>
                    <p>Drag words from the word bank to the target area:</p>

                    <DragDropProvider onDragEnd={handleDragEnd}>
                        <div style={{ display: 'flex', gap: '20px', marginTop: '20px' }}>
                            <div style={{ flex: 1 }}>
                                <h3>Word Bank</h3>
                                <Droppable droppableId="word-bank">
                                    <div style={{
                                        border: '2px dashed #ccc',
                                        borderRadius: '8px',
                                        padding: '15px',
                                        minHeight: '200px',
                                        backgroundColor: '#fafafa',
                                        transition: 'background-color 0.2s ease',
                                    }}>
                                        {wordBank.map((word, index) => (
                                            <Draggable key={word.id} draggableId={word.id} index={index} droppableId="word-bank">
                                                <div style={{
                                                    padding: '8px 12px',
                                                    margin: '4px',
                                                    backgroundColor: '#f5f5f5',
                                                    border: '1px solid #ddd',
                                                    borderRadius: '20px',
                                                    display: 'inline-block',
                                                    cursor: 'grab',
                                                    userSelect: 'none',
                                                    fontSize: '14px',
                                                    transition: 'all 0.2s ease',
                                                }}>
                                                    {word.text}
                                                </div>
                                            </Draggable>
                                        ))}
                                    </div>
                                </Droppable>
                            </div>

                            <div style={{ flex: 1 }}>
                                <h3>Target Area</h3>
                                <Droppable droppableId="target-area">
                                    <div style={{
                                        border: '2px solid #4caf50',
                                        borderRadius: '8px',
                                        padding: '15px',
                                        minHeight: '200px',
                                        backgroundColor: '#f8fff8',
                                        transition: 'background-color 0.2s ease',
                                    }}>
                                        {selectedWords.map((word, index) => (
                                            <Draggable key={word.id} draggableId={word.id} index={index} droppableId="target-area">
                                                <div style={{
                                                    padding: '8px 12px',
                                                    margin: '4px',
                                                    backgroundColor: '#4caf50',
                                                    color: 'white',
                                                    border: '1px solid #45a049',
                                                    borderRadius: '20px',
                                                    display: 'inline-block',
                                                    cursor: 'grab',
                                                    userSelect: 'none',
                                                    fontSize: '14px',
                                                    transition: 'all 0.2s ease',
                                                }}>
                                                    {word.text}
                                                </div>
                                            </Draggable>
                                        ))}
                                        {selectedWords.length === 0 && (
                                            <div style={{
                                                textAlign: 'center',
                                                color: '#999',
                                                fontStyle: 'italic',
                                                marginTop: '60px'
                                            }}>
                                                Drop words here
                                            </div>
                                        )}
                                    </div>
                                </Droppable>
                            </div>
                        </div>
                    </DragDropProvider>

                    <div style={{ marginTop: '20px', fontSize: '14px', color: '#666' }}>
                        <p><strong>Selected words:</strong> {selectedWords.length}</p>
                        <p><strong>Available words:</strong> {wordBank.length}</p>
                    </div>
                </div>
            );
        };

        // Demo App Component
        const DemoApp = () => {
            const [currentExample, setCurrentExample] = useState('basic');

            const examples = {
                basic: { title: 'Basic Sortable List', component: BasicSortableList },
                wordbank: { title: 'Word Bank', component: WordBankExample }
            };

            const CurrentComponent = examples[currentExample].component;

            return (
                <div style={{
                    minHeight: '100vh',
                    backgroundColor: '#f5f5f5',
                    fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'
                }}>
                    <header style={{
                        backgroundColor: '#2196f3',
                        color: 'white',
                        padding: '20px',
                        textAlign: 'center',
                        boxShadow: '0 2px 4px rgba(0,0,0,0.1)'
                    }}>
                        <h1 style={{ margin: '0 0 8px 0', fontSize: '32px' }}>
                            React-DND Examples
                        </h1>
                        <p style={{ margin: '0', opacity: 0.9, fontSize: '16px' }}>
                            Interactive examples demonstrating drag and drop functionality
                        </p>
                    </header>

                    <nav style={{
                        backgroundColor: 'white',
                        borderBottom: '1px solid #e0e0e0',
                        padding: '16px 20px'
                    }}>
                        <div style={{
                            display: 'flex',
                            gap: '12px',
                            maxWidth: '1200px',
                            margin: '0 auto'
                        }}>
                            {Object.entries(examples).map(([key, example]) => (
                                <button
                                    key={key}
                                    onClick={() => setCurrentExample(key)}
                                    style={{
                                        padding: '8px 16px',
                                        border: 'none',
                                        borderRadius: '20px',
                                        backgroundColor: currentExample === key ? '#2196f3' : '#f5f5f5',
                                        color: currentExample === key ? 'white' : '#333',
                                        cursor: 'pointer',
                                        fontSize: '14px',
                                        fontWeight: '500',
                                        transition: 'all 0.2s ease'
                                    }}
                                >
                                    {example.title}
                                </button>
                            ))}
                        </div>
                    </nav>

                    <main>
                        <CurrentComponent />
                    </main>

                    <footer style={{
                        backgroundColor: '#333',
                        color: 'white',
                        padding: '20px',
                        textAlign: 'center',
                        marginTop: '40px'
                    }}>
                        <p style={{ margin: '0', opacity: 0.8 }}>
                            React-DND Library Examples â€¢ Built with TypeScript and React
                        </p>
                    </footer>
                </div>
            );
        };

        // Listen for drag end events
        document.addEventListener('dragEnd', (e) => {
            // This would be handled by the DragDropProvider in a real implementation
            console.log('Drag ended:', e.detail);
        });

        // Render the app
        ReactDOM.render(<DemoApp />, document.getElementById('root'));
    </script>
</body>
</html> 